/*! ComplexViewer-0.0.1         Built: 2014-08-19 */
!function(a){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=a();else if("function"==typeof define&&define.amd)define([],a);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof global?b=global:"undefined"!=typeof self&&(b=self),b.xiNET=a()}}(function(){return function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);throw new Error("Cannot find module '"+g+"'")}var j=c[g]={exports:{}};b[g][0].call(j.exports,function(a){var c=b[g][1][a];return e(c?c:a)},j,j.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){"use strict";var c={};c.svgns="http://www.w3.org/2000/svg",c.xlinkNS="http://www.w3.org/1999/xlink",c.linkWidth=1.3,c.highlightColour=new RGBColor("#ffff99"),c.selectedColour=new RGBColor("#ffff99"),c.Controller=function(a){"string"==typeof a&&(a=document.getElementById(a)),this.intraHidden=!1,this.ambigHidden=!1,this.fields={},this.emptyElement(a),this.svgElement=document.createElementNS(c.svgns,"svg"),this.svgElement.setAttribute("id","networkSVG"),a.appendChild(this.svgElement),this.panning=!1,this.dragElement=null,this.dragging=!1,this.dragStart={},this.rotating=!1,this.svgElement.oncontextmenu=function(){return!1};var b=document.createElementNS(c.svgns,"rect");b.setAttribute("id","background_fill"),b.setAttribute("x",0),b.setAttribute("y",0),b.setAttribute("width",5120),b.setAttribute("height",4096),b.setAttribute("fill-opacity","1"),b.setAttribute("fill","#FFFFFF"),this.svgElement.appendChild(b),this.container=document.createElementNS(c.svgns,"g"),this.container.setAttribute("id","container");var d,e=!1;if(e===!0&&(d=document.createElementNS(c.svgns,"defs"),d.appendChild(this.container)),this.naryLinks=document.createElementNS(c.svgns,"g"),this.naryLinks.setAttribute("id","naryLinks"),this.container.appendChild(this.naryLinks),this.p_pLinksWide=document.createElementNS(c.svgns,"g"),this.p_pLinksWide.setAttribute("id","p_pLinksWide"),this.container.appendChild(this.p_pLinksWide),this.proteinLower=document.createElementNS(c.svgns,"g"),this.proteinLower.setAttribute("id","proteinLower"),this.container.appendChild(this.proteinLower),this.highlights=document.createElementNS(c.svgns,"g"),this.highlights.setAttribute("class","highlights"),this.container.appendChild(this.highlights),this.res_resLinks=document.createElementNS(c.svgns,"g"),this.res_resLinks.setAttribute("id","res_resLinks"),this.container.appendChild(this.res_resLinks),this.p_pLinks=document.createElementNS(c.svgns,"g"),this.p_pLinks.setAttribute("id","p_pLinks"),this.container.appendChild(this.p_pLinks),this.proteinUpper=document.createElementNS(c.svgns,"g"),this.proteinUpper.setAttribute("id","proteinUpper"),this.container.appendChild(this.proteinUpper),e===!1)this.svgElement.appendChild(this.container);else{var f=document.createElementNS(c.svgns,"use");f.setAttributeNS(c.xlinkNS,"href","#container"),this.svgElement.appendChild(f);var g=document.createElementNS(c.svgns,"clipPath");g.setAttribute("id","CP");var h=document.createElementNS(c.svgns,"circle");h.setAttribute("cx","341"),h.setAttribute("cy","192"),h.setAttribute("r","50"),g.appendChild(h),this.svgElement.appendChild(g);var i=document.createElementNS(c.svgns,"g");i.setAttribute("id","clippedI"),i.setAttribute("transform","translate(-341, -192) scale(2)");var j=document.createElementNS(c.svgns,"use");j.setAttributeNS(c.xlinkNS,"href","#container"),j.setAttribute("clip-path","url(#CP)"),j.setAttribute("opacity","1.0"),i.appendChild(j);var k=document.createElementNS(c.svgns,"circle");k.setAttribute("cx","341"),k.setAttribute("cy","192"),k.setAttribute("r","50"),k.setAttribute("fill","none"),k.setAttribute("stroke","gray"),k.setAttribute("stroke-with","gray"),i.appendChild(k),this.svgElement.appendChild(i),this.svgElement.appendChild(d)}this.tooltip=document.createElementNS(c.svgns,"text"),this.tooltip.setAttribute("x",0),this.tooltip.setAttribute("y",0);var l=document.createTextNode("tooltip");this.tooltip.appendChild(l),this.tooltip_bg=document.createElementNS(c.svgns,"rect"),this.tooltip_bg.setAttribute("class","tooltip_bg"),this.tooltip_bg.setAttribute("id","tooltip_bg"),this.tooltip_bg.setAttribute("fill-opacity",.75),this.tooltip_bg.setAttribute("stroke-opacity",1),this.tooltip_bg.setAttribute("stroke-width",1),this.tooltip_subBg=document.createElementNS(c.svgns,"rect"),this.tooltip_subBg.setAttribute("fill","white"),this.tooltip_subBg.setAttribute("stroke","white"),this.tooltip_subBg.setAttribute("class","tooltip_bg"),this.tooltip_subBg.setAttribute("id","tooltip_bg"),this.tooltip_subBg.setAttribute("opacity",1),this.tooltip_subBg.setAttribute("stroke-width",1),this.svgElement.appendChild(this.tooltip_subBg),this.svgElement.appendChild(this.tooltip_bg),this.svgElement.appendChild(this.tooltip),this.clear()},c.Controller.prototype.clear=function(){this.initComplete=!1,this.interactors=d3.map(),this.links=d3.map(),this.matches=d3.map(),this.subgraphs=new Array,this.layoutXOffset=0,this.proteinCount=0,this.maxBlobRadius=0,Interactor.MAXSIZE=0,this.layout=null,this.z=1,this.scores=null,this.selected=d3.map(),this.selectedLinks=d3.map(),this.tooltip.setAttribute("visibility","hidden"),this.tooltip_bg.setAttribute("visibility","hidden"),this.resetZoom(),this.state=c.Controller.MOUSE_UP,this.emptyElement(this.naryLinks),this.emptyElement(this.p_pLinksWide),this.emptyElement(this.highlights),this.emptyElement(this.p_pLinks),this.emptyElement(this.res_resLinks),this.emptyElement(this.proteinLower),this.emptyElement(this.proteinUpper)},c.Controller.prototype.emptyElement=function(a){for(;a.lastChild;)a.removeChild(a.lastChild)},c.Controller.prototype.message=function(){},c.Controller.prototype.init=function(a,b){var c=this.svgElement.parentNode;if("undefined"!=typeof c&&null!=c?(a=c.clientWidth,b=c.clientHeight):(a=800,b=480),this.svgElement.setAttribute("width","100%"),this.svgElement.setAttribute("height","100%"),this.svgElement.setAttribute("style","display:block;"),this.maxBlobRadius=Math.sqrt(2e3/Math.PI),this.initComplete=!0,"undefined"!=typeof this.layout&&null!=this.layout)this.loadLayout();else{for(var d=this.interactors.values(),e=d.length,f=0;e>f;f++){var g=d[f];g.setPosition(0,0)}for(var f=0;e>f;f++){var g=d[f];this.interactors.keys().length<3?g.toStick&&g.toStick():g.toBlob&&g.toBlob(),this.proteinLower.appendChild(g.lowerGroup),this.proteinUpper.appendChild(g.upperGroup)}this.autoLayout(a,b)}this.initMouseEvents(),"function"==typeof this.initTouchEvents&&this.initTouchEvents()},c.Controller.prototype.parkAll=function(){for(var a=this.proteins.values(),b=a.length,c=0;b>c;c++){var d=a[c];d.isParked===!1&&d.toggleParked()}},c.Controller.prototype.resetZoom=function(){this.container.setAttribute("transform","scale(1)"),this.scale();for(var a=this.interactors.values(),b=a.length,c=0;b>c;c++){var d=a[c];d.stickZoom=1,d.scale()}},c.Controller.prototype.getLayout=function(){var a=JSON.stringify(this,null,"	"),b=a.replace(/\\u0000/gi,"");return b},c.Controller.prototype.setLayout=function(a){this.layout="object"!=typeof a?JSON.parse(decodeURIComponent(a)):a},c.Controller.prototype.loadLayout=function(){var a=this.svgElement.suspendRedraw(5e3);for(var b in this.layout.interactors){var c=this.layout.interactors[b],d=this.interactors.get(b);void 0!==d&&(d.setPosition(c.x,c.y),"undefined"!=typeof c.stickZoom&&(d.stickZoom=c.stickZoom),"undefined"!=typeof c.rot&&(d.rotation=c.rot),"undefined"!=typeof c.form&&1===c.form?d.toStick():d.toBlob(),d.setAllLineCoordinates(),"undefined"!=typeof c.parked&&d.setParked(c.parked),c.flipped&&d.toggleFlipped(),this.proteinLower.appendChild(d.lowerGroup),this.proteinUpper.appendChild(d.upperGroup))}for(var e=this.interactors.values(),f=e.length,g=0;f>g;g++)b=e[g],null==b.x&&(b.toBlob(),b.setPosition(20,20),this.proteinLower.appendChild(b.lowerGroup),this.proteinUpper.appendChild(b.upperGroup));for(var h in this.layout.links){var i=this.layout.links[h],j=this.links.get(h);if(void 0!==j){"undefined"!=typeof i.hidden&&(j.hidden=i.hidden);var k=i.colour;if("undefined"!=typeof k)for(var l=j.sequenceLinks.values(),m=l.length,n=0;m>n;n++){var o=l[n];o.initSVG(),o.line.setAttribute("stroke","rgb("+k.r+","+k.g+","+k.b+")")}}}this.svgElement.unsuspendRedraw(a)},b.exports=c.Controller},{}]},{},[1])(1)});