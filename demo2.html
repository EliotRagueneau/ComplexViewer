<!DOCTYPE html>
<html>
    <head>
        <meta http-equiv="content-type" content="text/html; charset=UTF-8">
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
        <title>xiNET | Interaction Viewer</title>
        <meta name="xinet molecular interaction viewer" content="xinet molecular interaction viewer">
        <!--<link rel="icon" type="image/x-icon" href="./favicon.ico">-->
        <!-- css -->
        <!--<link rel="stylesheet" href="css/normalize.css">
            <link rel="stylesheet" href="css/new-main.css">-->
        <link rel="stylesheet" href="./demo.css">
        <link rel='stylesheet' type='text/css' href='./xlv/XLV.css'/>
        <!--mystical stuff, ask Matt-->
        <meta name="viewport" content="initial-scale=1, maximum-scale=1">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <!--libraries-->
        <script type="text/javascript" src="./xlv/lib/d3.v3.js"></script>
        <script type="text/javascript" src="./xlv/lib/colorbrewer.js"></script>
        <script type="text/javascript" src="./xlv/lib/jsdas.js"></script>
        <script type="text/javascript" src="./xlv/lib/rgbcolor.js"></script>
        <!--xiNet-->
        <script type="text/javascript" src="./xlv/controller/Init.js"></script>
        <script type="text/javascript" src="./xlv/controller/MouseEvents.js"></script>
        <script type="text/javascript" src="./xlv/controller/Layout.js"></script>
        <script type="text/javascript" src="./xlv/controller/Refresh.js"></script>
        <script type="text/javascript" src="./xlv/controller/ToolTips.js"></script>
        <script type="text/javascript" src="./xlv/model/Match.js"></script>
        <script type="text/javascript" src="./xlv/model/Link.js"></script>
        <script type="text/javascript" src="./xlv/model/Protein.js"></script>
        <script type="text/javascript" src="./xlv/model/Annotations.js"></script>
        <script type="text/javascript" src="./xlv/model/ProteinLink.js"></script>
        <script type="text/javascript" src="./xlv/model/ResidueLink.js"></script>
        <script type="text/javascript" src="./xlv/model/BoundFeature.js"></script>
        <script type="text/javascript" src="./xlv/controller/ExternalControls.js"></script>
        <script type="text/javascript" src="./xlv/Rotator.js"></script>
        <!--<script type="text/javascript" src="./xlv/InfoBox.js"></script>-->
        <script type="text/javascript" src="./xlv/DASUtil.js"></script>
        <script type="text/javascript" src="./xlv/ReadCSV.js"></script>
        <script type="text/javascript" src="./xlv/ReadMITAB.js"></script>
        <!--<script type="text/javascript" src="./xlv/ReadMIJSON.js"></script>-->
        <!--data-->
        <!--<script type="text/javascript" src="./MI-JSON.js"></script>-->
    </head>
    <body>

        <div style="height:100%;">
            <p style="display:inline-block;">xiNET interaction viewer demo</p>
            <p style="text-decoration: underline;float:right;display:inline-block;" onclick="help()"><strong>HELP</strong></p>

            <form>
                <p style="display:inline-block;">PSI-MI TAB:</p>
                <input type="text" name="url" id="mitabUrl" size="88"
                       value="http://www.ebi.ac.uk/Tools/webservices/psicquic/intact/webservices/current/search/interactor/P51587?format=tab27">
                <button type="button" onclick="getMITAB(document.getElementById('mitabUrl').value)">Load</button>
            </form>

            <!--            <p id="middle-title"><span>Demo</span></p>
          <p>Data from <a target="_blank" href="http://www.sciencemag.org/content/337/6100/1348">Herzog, F. et al. Structural Probing of a Protein Phosphatase 2A Network by Chemical Cross-Linking and Mass Spectrometry. Science 337, 1348â€“1352 (2012).</a></p>
          <div style="float:right;margin:8px;">
              <label for='pos_feat_select'>Annotations:</label>
              <select id='pos_feat_select' disabled
                      onchange="xlv.changeAnnotations(1, document.getElementById('pos_feat_select'));"
                      >
                  <option>DAS incomplete</option>
              </select>
          </div>
          <p id="menu" style="padding-left:0px;">
          </p>
          <select id='keyword_select' style='display:none;' disabled
                  onchange="xlv.changeAnnotations(2, document.getElementById('keyword_select'));"
                  >
              <option>DAS incomplete</option>
          </select>-->

            <div id="networkContainer"></div>
            <div id="networkCaption"></div>
        </div>

        <script type="text/javascript">
                //<![CDATA[
                var targetDiv = document.getElementById('networkContainer');
                var messageDiv = document.getElementById('networkCaption');
                xlv = new xinet.Controller(targetDiv);
                xlv.setMessageElement(messageDiv);

                //xlv.readMIJSON(miData);
                
                d3.text('./MITAB_Q9GZM8.tab', function(text) {
                    xlv.readMITAB(text);
                    }
                );

                function getMITAB(url) {
                    var xmlhttp = new XMLHttpRequest();
                    var params = "";
                    xmlhttp.open("POST", url, true);
                    xmlhttp.setRequestHeader("Content-type", "application/x-www-form-urlencoded");
                    xmlhttp.onreadystatechange = function() {//Call a function when the state changes.
                        if (xmlhttp.readyState === 4 && xmlhttp.status === 200) {
                            var response = xmlhttp.responseText;
                            xlv.message("response:" + response, true);
                        }
                    };
                    xmlhttp.send(params);
                }


                //]]>
        </script>

    </body></html>
